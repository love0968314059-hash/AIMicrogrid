# ğŸ”Œ å¾®ç½‘æ•°å­—å­ªç”Ÿç³»ç»Ÿ (Microgrid Digital Twin System)

ä¸€ä¸ªå®Œæ•´çš„å¾®ç½‘æ•°å­—å­ªç”Ÿç³»ç»Ÿï¼Œé›†æˆäº†é¢„æµ‹ã€å¼ºåŒ–å­¦ä¹ èƒ½é‡ç®¡ç†ã€3Då¯è§†åŒ–å’Œè‡ªç„¶è¯­è¨€äº¤äº’åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ—ï¸ å¾®ç½‘æ ¸å¿ƒæ¨¡æ‹Ÿ
- **å…‰ä¼å‘ç”µç³»ç»Ÿ** - è€ƒè™‘è¾ç…§åº¦ã€æ¸©åº¦å½±å“çš„å‘ç”µæ¨¡å‹
- **é£åŠ›å‘ç”µç³»ç»Ÿ** - åŸºäºé£é€Ÿçš„åŠŸç‡æ›²çº¿æ¨¡å‹
- **ç”µæ± å‚¨èƒ½ç³»ç»Ÿ** - åŒ…å«å……æ”¾ç”µæ•ˆç‡ã€SOCç®¡ç†ã€å¥åº·åº¦ç›‘æ§
- **æŸ´æ²¹å‘ç”µæœº** - å¤‡ç”¨ç”µæºæ¨¡å‹
- **è´Ÿè·æ¨¡å‹** - åŸºäºå…¸å‹æ—¥è´Ÿè·æ›²çº¿çš„è´Ÿè·æ¨¡æ‹Ÿ
- **ç”µç½‘è¿æ¥** - æ”¯æŒè´­/å”®ç”µåŠŸèƒ½

### ğŸ”® é¢„æµ‹ç³»ç»Ÿ
- å…‰ä¼åŠŸç‡é¢„æµ‹ï¼ˆè€ƒè™‘å¤©æ°”å› ç´ ï¼‰
- é£ç”µåŠŸç‡é¢„æµ‹ï¼ˆè¶‹åŠ¿åˆ†æï¼‰
- è´Ÿè·é¢„æµ‹ï¼ˆæ—¥å‘¨æœŸæ¨¡å¼ï¼‰
- ç”µä»·é¢„æµ‹ï¼ˆåˆ†æ—¶ç”µä»·ï¼‰
- **ä¸ç¡®å®šæ€§ä¼°è®¡** - æä¾›é¢„æµ‹åŒºé—´

### ğŸ¤– å¼ºåŒ–å­¦ä¹ èƒ½é‡ç®¡ç†
- **DQNæ™ºèƒ½ä½“** - è‡ªä¸»å­¦ä¹ æœ€ä¼˜è°ƒåº¦ç­–ç•¥
- **è§„åˆ™ç­–ç•¥** - åŸºäºä¸“å®¶è§„åˆ™çš„åŸºå‡†ç­–ç•¥
- **è‡ªé€‚åº”ç®¡ç†å™¨** - æ™ºèƒ½èåˆRLå’Œè§„åˆ™ç­–ç•¥
- **å¤šç›®æ ‡å¥–åŠ±** - å¹³è¡¡æˆæœ¬ã€å¯å†ç”Ÿèƒ½æºåˆ©ç”¨ã€ç”µæ± å¥åº·

### ğŸ“Š ç­–ç•¥è¯„ä¼°
- æˆæœ¬åˆ†æï¼ˆè´­ç”µæˆæœ¬ã€å”®ç”µæ”¶å…¥ï¼‰
- èƒ½æºåˆ©ç”¨ç‡è¯„ä¼°
- ç”µç½‘ä¾èµ–åº¦åˆ†æ
- ç”µæ± å¥åº·ç®¡ç†è¯„ä¼°
- CO2æ’æ”¾è®¡ç®—
- ç»¼åˆè¯„åˆ†ä¸æ”¹è¿›å»ºè®®

### ğŸ’¬ è‡ªç„¶è¯­è¨€äº¤äº’
- çŠ¶æ€æŸ¥è¯¢ï¼ˆ"æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€"ï¼‰
- è®¾å¤‡æ§åˆ¶ï¼ˆ"å¼€å§‹å……ç”µ"ï¼‰
- åˆ†ææŠ¥å‘Šï¼ˆ"ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š"ï¼‰
- é¢„æµ‹æŸ¥è¯¢ï¼ˆ"é¢„æµ‹æœªæ¥1å°æ—¶"ï¼‰
- å¤šç§å‘½ä»¤æ¨¡å¼æ”¯æŒ

### ğŸ® 3Då¯è§†åŒ–ç•Œé¢
- **Three.jsé©±åŠ¨** - å®æ—¶3Dæ¸²æŸ“
- **äº¤äº’æ§åˆ¶** - é¼ æ ‡æ—‹è½¬/ç¼©æ”¾
- **å®æ—¶æ•°æ®æ˜¾ç¤º** - åŠŸç‡ã€SOCã€ç”µä»·ç­‰
- **åŠ¨æ€æ•ˆæœ** - é£æœºæ—‹è½¬ã€ç”µåŠ›æµåŠ¨ç²’å­
- **æ§åˆ¶é¢æ¿** - æ¨¡æ‹Ÿæ§åˆ¶å’Œè®¾å¤‡æ“ä½œ
- **æ™ºèƒ½èŠå¤©** - é›†æˆNLPäº¤äº’

## ğŸ“ é¡¹ç›®ç»“æ„

```
workspace/
â”œâ”€â”€ microgrid_digital_twin/          # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py                  # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ core.py                      # å¾®ç½‘æ ¸å¿ƒç»„ä»¶æ¨¡å‹
â”‚   â”œâ”€â”€ prediction.py                # é¢„æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ rl_agent.py                  # å¼ºåŒ–å­¦ä¹ æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ evaluation.py                # ç­–ç•¥è¯„ä¼°æ¨¡å—
â”‚   â”œâ”€â”€ nlp_interface.py             # è‡ªç„¶è¯­è¨€æ¥å£
â”‚   â””â”€â”€ visualization.py             # 3Då¯è§†åŒ–ç”Ÿæˆ
â”œâ”€â”€ microgrid_digital_twin_demo.ipynb # Colabæ¼”ç¤ºnotebook
â””â”€â”€ README.md                        # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šGoogle Colabï¼ˆæ¨èï¼‰

1. ä¸Šä¼  `microgrid_digital_twin/` æ–‡ä»¶å¤¹åˆ°Colab
2. ä¸Šä¼ å¹¶è¿è¡Œ `microgrid_digital_twin_demo.ipynb`
3. æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ªå•å…ƒæ ¼

### æ–¹å¼äºŒï¼šæœ¬åœ°è¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd workspace

# å®‰è£…ä¾èµ–
pip install numpy

# ä½¿ç”¨Jupyterè¿è¡Œ
jupyter notebook microgrid_digital_twin_demo.ipynb
```

### æ–¹å¼ä¸‰ï¼šPythonè„šæœ¬

```python
from microgrid_digital_twin.core import MicrogridDigitalTwin
from microgrid_digital_twin.rl_agent import AdaptiveEnergyManager
from microgrid_digital_twin.visualization import Visualization3D

# åˆ›å»ºç³»ç»Ÿ
digital_twin = MicrogridDigitalTwin()

# åˆ›å»ºèƒ½é‡ç®¡ç†å™¨
manager = AdaptiveEnergyManager()

# è¿è¡Œæ¨¡æ‹Ÿ
for _ in range(60):
    obs = digital_twin.get_observation()
    state = digital_twin.get_state()
    action = manager.select_action(obs, state)
    result = digital_twin.step(action)

# ç”Ÿæˆå¯è§†åŒ–
viz = Visualization3D(digital_twin)
viz.save_html("visualization.html")
```

## ğŸ“– æ¨¡å—ä½¿ç”¨æŒ‡å—

### 1. æ ¸å¿ƒæ¨¡æ‹Ÿç³»ç»Ÿ

```python
from microgrid_digital_twin.core import MicrogridDigitalTwin

# è‡ªå®šä¹‰é…ç½®
config = {
    'solar': {'capacity_kw': 100.0},
    'wind': {'capacity_kw': 50.0},
    'battery': {'capacity_kwh': 200.0, 'soc': 0.5}
}

# åˆ›å»ºç³»ç»Ÿ
dt = MicrogridDigitalTwin(config)

# æ‰§è¡Œä¸€æ­¥æ¨¡æ‹Ÿ
action = {'battery_action': 0.5, 'diesel_on': False}
state = dt.step(action)

# è·å–çŠ¶æ€
print(dt.get_state())
```

### 2. é¢„æµ‹ç³»ç»Ÿ

```python
from microgrid_digital_twin.prediction import IntegratedForecaster

forecaster = IntegratedForecaster(prediction_horizon=60)
forecasts = forecaster.forecast_all(hour=12, minute=0)

print(f"å…‰ä¼é¢„æµ‹: {forecasts['solar']['mean'].mean():.1f} kW")
print(f"è´Ÿè·é¢„æµ‹: {forecasts['load']['mean'].mean():.1f} kW")
```

### 3. å¼ºåŒ–å­¦ä¹ 

```python
from microgrid_digital_twin.rl_agent import EnergyManagementAgent

agent = EnergyManagementAgent(state_dim=10, action_dim=2)

# è®­ç»ƒå¾ªç¯
for episode in range(100):
    obs = digital_twin.get_observation()
    action = agent.select_action(obs, training=True)
    next_state = digital_twin.step(action)
    reward = agent.calculate_reward(state, action, next_state)
    agent.train_step(obs, action, reward, next_obs, done)
```

### 4. è‡ªç„¶è¯­è¨€äº¤äº’

```python
from microgrid_digital_twin.nlp_interface import NLPInterface

nlp = NLPInterface(digital_twin=dt)

# è‡ªç„¶è¯­è¨€æŸ¥è¯¢
print(nlp.process("æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€"))
print(nlp.process("ç”µæ± ç”µé‡æ€ä¹ˆæ ·"))
print(nlp.process("å¸®åŠ©"))
```

### 5. 3Då¯è§†åŒ–

```python
from microgrid_digital_twin.visualization import Visualization3D

viz = Visualization3D(digital_twin)

# åœ¨Notebookä¸­æ˜¾ç¤º
viz.display_in_notebook()

# ä¿å­˜HTMLæ–‡ä»¶
viz.save_html("microgrid_3d.html")
```

## ğŸ® 3Dç•Œé¢åŠŸèƒ½

æ‰“å¼€ç”Ÿæˆçš„HTMLæ–‡ä»¶ï¼Œå¯ä»¥ä½“éªŒï¼š

- **è§†è§’æ§åˆ¶** - é¼ æ ‡æ‹–åŠ¨æ—‹è½¬ï¼Œæ»šè½®ç¼©æ”¾
- **çŠ¶æ€ç›‘æ§** - å®æ—¶æ˜¾ç¤ºå„ç»„ä»¶åŠŸç‡å’ŒSOC
- **æ§åˆ¶é¢æ¿** - ç”µæ± å……æ”¾ç”µã€æŸ´æ²¹æœºå¼€å…³
- **åŠŸç‡å›¾è¡¨** - å†å²è¶‹åŠ¿å¯è§†åŒ–
- **æ™ºèƒ½èŠå¤©** - è¾“å…¥é—®é¢˜è·å–ç³»ç»Ÿä¿¡æ¯

## ğŸ“Š ç³»ç»ŸæŒ‡æ ‡

| æŒ‡æ ‡ | è¯´æ˜ |
|------|------|
| å…‰ä¼å®¹é‡ | 100 kW |
| é£ç”µå®¹é‡ | 50 kW |
| å‚¨èƒ½å®¹é‡ | 200 kWh |
| å³°å€¼è´Ÿè· | 150 kW |
| ç”µç½‘äº¤äº’ | è´­100kW / å”®50kW |

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

å¯ä»¥é€šè¿‡é…ç½®å­—å…¸è‡ªå®šä¹‰ç³»ç»Ÿå‚æ•°ï¼š

```python
config = {
    'solar': {
        'capacity_kw': 150.0,
        'efficiency': 0.20,
        'panel_area': 750.0
    },
    'wind': {
        'capacity_kw': 80.0,
        'cut_in_speed': 3.0,
        'rated_speed': 12.0,
        'cut_out_speed': 25.0
    },
    'battery': {
        'capacity_kwh': 300.0,
        'max_charge_rate': 75.0,
        'max_discharge_rate': 75.0,
        'soc': 0.6,
        'soc_min': 0.15,
        'soc_max': 0.85
    },
    'load': {
        'base_load': 100.0,
        'peak_load': 200.0
    }
}
```

## ğŸ“ è‡ªç„¶è¯­è¨€å‘½ä»¤ç¤ºä¾‹

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| "æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€" | æ˜¾ç¤ºå®Œæ•´ç³»ç»ŸçŠ¶æ€ |
| "ç”µæ± ç”µé‡" | æŸ¥çœ‹å‚¨èƒ½SOC |
| "å½“å‰ç”µä»·" | æ˜¾ç¤ºå®æ—¶ç”µä»· |
| "å¤©æ°”æƒ…å†µ" | æ˜¾ç¤ºå¤©æ°”å‚æ•° |
| "å¯å†ç”Ÿèƒ½æºåˆ©ç”¨ç‡" | æŸ¥çœ‹æ¸…æ´èƒ½æºæ¯”ä¾‹ |
| "ç”ŸæˆæŠ¥å‘Š" | è¾“å‡ºè¯„ä¼°æŠ¥å‘Š |
| "é¢„æµ‹æœªæ¥1å°æ—¶" | è·å–é¢„æµ‹ç»“æœ |
| "å¼€å§‹å……ç”µ" | å¯åŠ¨ç”µæ± å……ç”µ |
| "å¯åŠ¨æŸ´æ²¹å‘ç”µæœº" | å¯åŠ¨å¤‡ç”¨ç”µæº |
| "å¸®åŠ©" | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.7+**
- **NumPy** - æ•°å€¼è®¡ç®—
- **Three.js** - 3Då¯è§†åŒ–
- **IPython** - Notebookæ”¯æŒ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

---

**å¾®ç½‘æ•°å­—å­ªç”Ÿç³»ç»Ÿ** - æ™ºèƒ½èƒ½æºç®¡ç†çš„æœªæ¥ ğŸŒ±
